(()=>{var e={146:e=>{var r,t,n=Function.prototype,o=Object.prototype,a=n.toString,i=o.hasOwnProperty,c=a.call(Object),s=o.toString,f=(r=Object.getPrototypeOf,t=Object,function(e){return r(t(e))});e.exports=function(e){if(!function(e){return!!e&&"object"==typeof e}(e)||"[object Object]"!=s.call(e)||function(e){var r=!1;if(null!=e&&"function"!=typeof e.toString)try{r=!!(e+"")}catch(e){}return r}(e))return!1;var r=f(e);if(null===r)return!0;var t=i.call(r,"constructor")&&r.constructor;return"function"==typeof t&&t instanceof t&&a.call(t)==c}}},r={};function t(n){var o=r[n];if(void 0!==o)return o.exports;var a=r[n]={exports:{}};return e[n](a,a.exports,t),a.exports}t.d=(e,r)=>{for(var n in r)t.o(r,n)&&!t.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:r[n]})},t.o=(e,r)=>Object.prototype.hasOwnProperty.call(e,r),t.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{"use strict";var e={};t.r(e),t.d(e,{pubKeyBytesToDidDoc:()=>N});var r=t(146);const n=new TextEncoder,o=new TextDecoder;function a(e,r){if("string"!=typeof e||!e)throw new Error(`${r} missing or invalid`)}function i(e){switch(function(e){if(!r(e))throw new Error("JWK must be an object")}(e),e.kty){case"EC":a(e.crv,'"crv" (Curve) Parameter'),a(e.x,'"x" (X Coordinate) Parameter'),a(e.y,'"y" (Y Coordinate) Parameter');break;case"OKP":a(e.crv,'"crv" (Subtype of Key Pair) Parameter'),a(e.x,'"x" (Public Key) Parameter');break;case"RSA":a(e.e,'"e" (Exponent) Parameter'),a(e.n,'"n" (Modulus) Parameter');break;default:throw new Error('"kty" (Key Type) Parameter missing or unsupported')}}function c(e){let r;switch(e.kty){case"EC":r={crv:e.crv,kty:e.kty,x:e.x,y:e.y};break;case"OKP":r={crv:e.crv,kty:e.kty,x:e.x};break;case"RSA":r={e:e.e,kty:e.kty,n:e.n}}return r}const s="did:key:",f="application/did+ld+json",h=(new Uint8Array(0),e=>{if(e instanceof Uint8Array&&"Uint8Array"===e.constructor.name)return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")});class d{constructor(e,r,t){this.name=e,this.prefix=r,this.baseEncode=t}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class p{constructor(e,r,t){if(this.name=e,this.prefix=r,void 0===r.codePointAt(0))throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=t}decode(e){if("string"==typeof e){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}or(e){return y(this,e)}}class u{constructor(e){this.decoders=e}or(e){return y(this,e)}decode(e){const r=e[0],t=this.decoders[r];if(t)return t.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const y=(e,r)=>new u({...e.decoders||{[e.prefix]:e},...r.decoders||{[r.prefix]:r}});class l{constructor(e,r,t,n){this.name=e,this.prefix=r,this.baseEncode=t,this.baseDecode=n,this.encoder=new d(e,r,t),this.decoder=new p(e,r,n)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const b=({name:e,prefix:r,encode:t,decode:n})=>new l(e,r,t,n),w=({prefix:e,name:r,alphabet:t})=>{const{encode:n,decode:o}=function(e,r){if(e.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),n=0;n<t.length;n++)t[n]=255;for(var o=0;o<e.length;o++){var a=e.charAt(o),i=a.charCodeAt(0);if(255!==t[i])throw new TypeError(a+" is ambiguous");t[i]=o}var c=e.length,s=e.charAt(0),f=Math.log(c)/Math.log(256),h=Math.log(256)/Math.log(c);function d(e){if("string"!=typeof e)throw new TypeError("Expected String");if(0===e.length)return new Uint8Array;var r=0;if(" "!==e[r]){for(var n=0,o=0;e[r]===s;)n++,r++;for(var a=(e.length-r)*f+1>>>0,i=new Uint8Array(a);e[r];){var h=t[e.charCodeAt(r)];if(255===h)return;for(var d=0,p=a-1;(0!==h||d<o)&&-1!==p;p--,d++)h+=c*i[p]>>>0,i[p]=h%256>>>0,h=h/256>>>0;if(0!==h)throw new Error("Non-zero carry");o=d,r++}if(" "!==e[r]){for(var u=a-o;u!==a&&0===i[u];)u++;for(var y=new Uint8Array(n+(a-u)),l=n;u!==a;)y[l++]=i[u++];return y}}}return{encode:function(r){if(r instanceof Uint8Array||(ArrayBuffer.isView(r)?r=new Uint8Array(r.buffer,r.byteOffset,r.byteLength):Array.isArray(r)&&(r=Uint8Array.from(r))),!(r instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===r.length)return"";for(var t=0,n=0,o=0,a=r.length;o!==a&&0===r[o];)o++,t++;for(var i=(a-o)*h+1>>>0,f=new Uint8Array(i);o!==a;){for(var d=r[o],p=0,u=i-1;(0!==d||p<n)&&-1!==u;u--,p++)d+=256*f[u]>>>0,f[u]=d%c>>>0,d=d/c>>>0;if(0!==d)throw new Error("Non-zero carry");n=p,o++}for(var y=i-n;y!==i&&0===f[y];)y++;for(var l=s.repeat(t);y<i;++y)l+=e.charAt(f[y]);return l},decodeUnsafe:d,decode:function(e){var t=d(e);if(t)return t;throw new Error(`Non-${r} character`)}}}(t,r);return b({prefix:e,name:r,encode:n,decode:e=>h(o(e))})},x=({name:e,prefix:r,bitsPerChar:t,alphabet:n})=>b({prefix:r,name:e,encode:e=>((e,r,t)=>{const n="="===r[r.length-1],o=(1<<t)-1;let a="",i=0,c=0;for(let n=0;n<e.length;++n)for(c=c<<8|e[n],i+=8;i>t;)i-=t,a+=r[o&c>>i];if(i&&(a+=r[o&c<<t-i]),n)for(;a.length*t&7;)a+="=";return a})(e,n,t),decode:r=>((e,r,t,n)=>{const o={};for(let e=0;e<r.length;++e)o[r[e]]=e;let a=e.length;for(;"="===e[a-1];)--a;const i=new Uint8Array(a*t/8|0);let c=0,s=0,f=0;for(let r=0;r<a;++r){const a=o[e[r]];if(void 0===a)throw new SyntaxError(`Non-${n} character`);s=s<<t|a,c+=t,c>=8&&(c-=8,i[f++]=255&s>>c)}if(c>=t||255&s<<8-c)throw new SyntaxError("Unexpected end of data");return i})(r,n,t,e)}),g=(x({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),x({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),x({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),x({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),x({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),x({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),x({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),x({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),x({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),w({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}));w({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var m=128,v=-128,P=Math.pow(2,31),A=Math.pow(2,7),E=Math.pow(2,14),k=Math.pow(2,21),U=Math.pow(2,28),S=Math.pow(2,35),C=Math.pow(2,42),M=Math.pow(2,49),O=Math.pow(2,56),j=Math.pow(2,63);const T=function e(r,t,n){t=t||[];for(var o=n=n||0;r>=P;)t[n++]=255&r|m,r/=128;for(;r&v;)t[n++]=255&r|m,r>>>=7;return t[n]=0|r,e.bytes=n-o+1,t},D=function(e){return e<A?1:e<E?2:e<k?3:e<U?4:e<S?5:e<C?6:e<M?7:e<O?8:e<j?9:10};new WeakMap,Symbol.toStringTag,Symbol.for("nodejs.util.inspect.custom"),Symbol.for("@ipld/js-cid/CID");class K extends Error{constructor(e,r){super(r),this.name="DIDResolutionError",this.code=e}}class J extends K{constructor(e){super(J.code,e),this.name="InvalidDidError"}}function N(e,r,t){const n=`${s}${r}`,a=`${n}#${r}`;let h;try{h=function(e){const r=JSON.parse(o.decode(e));if(i(r),JSON.stringify(r)!==JSON.stringify(c(r)))throw new Error("The JWK embedded in the DID is not correctly formatted");return r}(e)}catch(e){throw new J(e instanceof Error?e.message:"Unknown error")}return{...t===f&&{"@context":["https://www.w3.org/ns/did/v1","https://w3id.org/security/suites/jws-2020/v1"]},id:n,verificationMethod:[{id:a,type:"JsonWebKey2020",controller:n,publicKeyJwk:h}],authentication:[a],assertionMethod:[a],capabilityInvocation:[a],capabilityDelegation:[a]}}J.code="invalidDid";const $=function(e){try{return`${s}${((e,r)=>{const t=e.byteLength,n=D(60241),o=new Uint8Array(n+t);return((e,r,t=0)=>{T(e,r,t)})(60241,o,0),o.set(e,n),g.encode(o)})(function(e){i(e);const r=c(e);return n.encode(JSON.stringify(r))}({kty:"EC",crv:"P-256",x:"ngy44T1vxAT6Di4nr-UaM9K3Tlnz9pkoksDokKFkmNc",y:"QCRfOKlSM31GTkb4JHx3nXB4G_jSPMsbdjzlkT_UpPc"}))}`}catch(e){throw new Error(e instanceof Error?e.message:"Unknown error")}}();console.log($)})()})();